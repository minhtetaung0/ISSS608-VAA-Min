{
  "hash": "4b9ba45492acc8a8b2527665c3b8d2a5",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Take-home_Ex01\"\nauthor: \"Min Htet Aung\"\ndescription: \"This is the Take-home Exercise 1\" \ndate: \"May 2, 2025\"\ndate-modified: \"last-modified\"\nformat: html\neditor: visual\nexecute: \n  eval: true\n  echo: true\n  warning: false\n  freeze: true\n---\n\n\n\n# 1. Overview\n\nThis Quarto document supports a data-driven article by a local online media company that aims to investigate Singapore's demographic structure and distribution in 2024. The analysis uses official population statistics to highlight the top 28 planning areas (PAs) with the highest total resident population in a bar chart, followed by a diverging gender distribution define that clearly shows the male-to-female ratio in these locations. Furthermore, the report includes population pyramids for the top 24 most populated PAs, which illustrate age distribution patterns across sexes. These pyramids are especially useful for detecting places with aging populations, as evidenced by wider age bands at the upper age levels. In addition to supporting the media company's upcoming article with clear, appealing visuals, the visualizations collectively offer a thorough overview of where people live, how the population is divided by gender, and which regions may experience demographic shifts related to aging. These are important insights that can guide public discourse and policymaking.\n\n# 2. Data Preparation\n\nIn order to prepare the data for precise analysis and visualization, this process involves cleaning the data by eliminating duplicates and missing values, recoding age values, and converting important variables to the proper formats.\n\n## 2.1 Loading Packages\n\nWe load the following R packages using the `pacman::p_load()` function:\n\n-   ***tidyverse** –* Core collection of R packages designed for data science\n\n-   ***dplyr** –* For data manipulation and transformation.\n\n-   ***patchwork*** – To combine multiple ggplot2 plots into a single layout.\n\n-   ***scales*** – For formatting axes and labels (e.g., commas, percentages).\n\n-   ***forcats*** – For working with categorical/factor variables.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(dplyr, patchwork, tidyverse, scales, forcasts)\n```\n:::\n\n\n\n## 2.2 Importing Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsg_res <- read.csv(\"data/respopagesex2024.csv\")\n```\n:::\n\n\n\nThis is the description of the data:\n\n| Column Name | Description | Data Type |\n|-----------------|---------------------------------------|-----------------|\n| PA | Planning Area (e.g., Tampines, Woodlands, etc.) | Categorical |\n| Age | Age group (e.g., \"0\", \"5\", ..., \"90+\", typically in 5-year bins) | Ordinal (Factor or Integer) |\n| Sex | Gender category: \"Males\" or \"Females\" | Categorical |\n| Pop | Population count for the given PA, age group, and sex | Numeric (Integer) |\n\n## 2.3 Data Pre Processing\n\nThis section involved cleaning and formatting the dataset by removing duplicates and missing values, converting the \"90_and_Over\" age group to numeric, and converting key variables like age, sex, and planning area into appropriate data types for analysis.\n\n### 2.3.1 Check and Drop Duplicates\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsg_res <- sg_res %>%\n  distinct()\n```\n:::\n\n\n\n### 2.3.2 Check and Drop NAs\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsg_res <- sg_res %>%\n  mutate(\n    Age = ifelse(Age == \"90_and_Over\", \"90\", Age),\n    Age = as.numeric(Age),\n    PA = as.factor(PA),\n    SZ = as.factor(SZ),\n    Sex = as.factor(Sex),\n    Time = as.integer(Time)\n  ) %>%\n  drop_na()\n```\n:::\n\n\n\n# 3. Visualisation\n\n## 3.1 Population and Gender Distribution in Top 28 Planning Areas\n\nThis section visualizes the top 28 planning areas (PAs) in Singapore based on their total population. The first bar chart ranks these areas, revealing that ***Tampines, Bedok, and Sengkang*** are the most populous, each with over 265,000 residents. These areas are key residential hubs and likely experience high demand for infrastructure and services.\n\nThe second plot is a diverging bar chart that shows the gender distribution within each of these top 28 PAs. ***The proportions of males and females are nearly balanced across most regions***, with slight variations. For example, Bukit Merah, Tanglin and Queenstown have a noticeably higher female percentage (around 53–54%), while areas like Choa Chu Kang and Woodlands show an exact or near-equal male-female split (50-50%).\n\nThese visualizations provide a clear demographic snapshot—highlighting not only which areas are most densely populated, but also offering insights into gender balance, which can influence local policies, healthcare planning, and community programs.\n\n### 3.1.1 Top 28 Planning Areas by Total Population\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntop28_pa_pop <- sg_res %>%\n  group_by(PA) %>%\n  summarise(TotalPop = sum(Pop), .groups = \"drop\") %>%\n  arrange(desc(TotalPop)) %>%\n  slice_head(n = 28)\n\ntotal_pop_by_pa <- ggplot(top28_pa_pop, aes(x = TotalPop, y = fct_reorder(PA, TotalPop))) +\n  geom_col(fill = \"steelblue\") +\n  geom_text(aes(label = scales::comma(TotalPop)), hjust = -0.1, size = 3)+\n  labs(\n    title = \"Top 28 Planning Areas by Total Population\",\n    x = \"Total Population\",\n    y = \"Planning Area\"\n  ) +\n  theme_minimal()+\n  theme(axis.title.x = element_text(size = 20),\n        axis.title.y = element_text(size = 20),\n        plot.title = element_text(size = 30))\n```\n:::\n\n\n\n### 3.1.2 Gender Distribution in Top 28 Planning Areas\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npop_sex_dist <- sg_res %>%\n  filter(PA %in% top28_pa_pop$PA) %>%\n  group_by(PA, Sex) %>%\n  summarise(Pop = sum(Pop), .groups = \"drop\") %>%\n  group_by(PA) %>%\n  mutate(\n    Total = sum(Pop),\n    Percent = Pop / Total,\n    Pop_signed = ifelse(Sex == \"Males\", -Pop, Pop),\n    Percent_label = paste0(round(Percent * 100), \"%\")\n  ) %>%\n  ungroup()\n\npop_sex_dist$PA <- factor(pop_sex_dist$PA, levels = top28_pa_pop$PA)\n\n\nsex_of_pop_by_pa <- ggplot(pop_sex_dist, aes(x = Pop_signed, y = PA, fill = Sex)) +\n  geom_col(width = 0.6) +\n  geom_text(aes(label = Percent_label),\n            position = position_stack(vjust = 0.5),\n            size = 3.2, color = \"white\") +\n  scale_x_continuous(\n    labels = abs,\n    expand = expansion(mult = c(0.1, 0.1))\n  ) +\n  labs(\n    title = \"Gender Distribution in Top 28 Planning Areas\",\n    x = \"Population Count\",\n    y = \"Planning Area\"\n  ) +\n  theme_minimal() +\n  theme(axis.title.x = element_text(size = 20),\n        axis.title.y = element_text(size = 20),\n        plot.title = element_text(size = 30))\n  scale_fill_manual(values = c(\"Males\" = \"#1f77b4\", \"Females\" = \"#ff7f0e\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n<ggproto object: Class ScaleDiscrete, Scale, gg>\n    aesthetics: fill\n    axis_order: function\n    break_info: function\n    break_positions: function\n    breaks: waiver\n    call: call\n    clone: function\n    dimension: function\n    drop: TRUE\n    expand: waiver\n    get_breaks: function\n    get_breaks_minor: function\n    get_labels: function\n    get_limits: function\n    get_transformation: function\n    guide: legend\n    is_discrete: function\n    is_empty: function\n    labels: waiver\n    limits: function\n    make_sec_title: function\n    make_title: function\n    map: function\n    map_df: function\n    n.breaks.cache: NULL\n    na.translate: TRUE\n    na.value: grey50\n    name: waiver\n    palette: function\n    palette.cache: NULL\n    position: left\n    range: environment\n    rescale: function\n    reset: function\n    train: function\n    train_df: function\n    transform: function\n    transform_df: function\n    super:  <ggproto object: Class ScaleDiscrete, Scale, gg>\n```\n\n\n:::\n:::\n\n\n\n### 3.1.3 Combining Two Plots\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncombine_plots <- total_pop_by_pa / plot_spacer() / sex_of_pop_by_pa +\n  plot_layout(heights = c(1, 0.1, 1))\ncombine_plots\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-7-1.png){width=1440}\n:::\n:::\n\n\n\n## 3.2 Age Pyramid of Top 24 Planning Areas\n\nThis section presents population pyramids for the top 24 planning areas (PAs) in Singapore, offering a detailed view of age and gender distribution within each region. Each pyramid plots the male population on the left and female population on the right across single-year age groups, allowing for the identification of demographic trends such as youth-dominant or aging populations.\n\nFrom the visualizations, areas like ***Woodlands, Tampines, Sengkang, and Punggol*** show relatively balanced and broad bases, ***indicating a younger population*** with strong representation in the working-age and child demographics. In contrast, areas like ***Bukit Timah, Queenstown, and Bukit Merah*** display narrower bases and wider upper sections, and giving a ***signal of an aging population*** with a higher proportion of elderly residents.\n\nThese insights are crucial for urban planning, healthcare provisioning, and policymaking, as they highlight the varying age structures and potential future needs of each planning area.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Filter out the top 24 PA that has the highest population \ntop_24_pas <- sg_res %>%\n  group_by(PA) %>%\n  summarise(Total = sum(Pop), .groups = \"drop\") %>%\n  slice_max(order_by = Total, n = 24) %>%\n  pull(PA)\n\npyramid_data_top24 <- sg_res %>%\n  filter(PA %in% top_24_pas) %>%\n  group_by(PA, Age, Sex) %>%\n  summarise(Pop = sum(Pop), .groups = \"drop\") %>%\n  mutate(Pop = ifelse(Sex == \"Males\", -Pop, Pop))\n\n\nggplot(pyramid_data_top24, aes(x = Age, y = Pop, fill = Sex)) +\n  geom_bar(stat = \"identity\", width = 0.8) +\n  coord_flip() +\n  scale_y_continuous(labels = abs) +\n  facet_wrap(~ PA, scales = \"free_y\", ncol = 6) +  # 6 columns for layout\n  labs(title = \"Population Pyramids of Top 24 Planning Areas\",\n       x = \"Age Group\", y = \"Population\") +\n  theme_minimal(base_size = 9) +\n  theme(axis.title.x = element_text(size = 25),\n        axis.title.y = element_text(size = 25),\n        plot.title = element_text(size = 35)) +\n  scale_fill_manual(values = c(\"Males\" = \"skyblue\", \"Females\" = \"salmon\"))\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-html/unnamed-chunk-8-1.png){width=1728}\n:::\n:::\n\n\n\n# 4. Summary\n\nWith an emphasis on planning areas with the largest populations, this publication offers a thorough demographic estimate of Singapore's resident population in 2024. The analysis uses systematic data preparation and effective visualization approaches to highlight the top 28 planning areas by total population and evaluate their gender distribution using diverging bar charts. Furthermore, the top 24 areas' population pyramids provide information about the age distribution of each region, highlighting places with younger populations compared to those with aging populations. These visual aids are useful for influencing public discussions, urban planning, and policy formation; they are particularly useful for a local media article that aims to clarify Singapore's changing demographics.\n\n# 5. Reference\n\nThe Data Link: [Singapore Residents by Planning Area / Subzone, Single Year of Age and Sex, June 2024](https://www.singstat.gov.sg/find-data/search-by-theme/population/geographic-distribution/latest-data)\n",
    "supporting": [
      "Take-home_Ex01_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}